var Publisher=function(){function e(){this.subscriptions={},this.registeredEvents=[]}return e.prototype.eventIndex=function(e){for(var t,r=0;t=this.registeredEvents[r];r+=1)if(t.name===e)return r;return-1},e.prototype.getEvent=function(e){if(!e)throw new Error("Expected an event name.");var t=this.eventIndex(e);if(t>-1){var r=this.registeredEvents[t];return{description:r.description,handlers:this.subscriptions[e],name:r.name,parameters:r.parameters,registrant:r.registrant}}throw new Error("Event "+e+" is unregistered.")},e.prototype.getAllEvents=function(){for(var e=[],t=0,r=this.registeredEvents;t<r.length;t++){var n=r[t];e.push(this.getEvent(n.name))}return e},e.prototype.getEventDescription=function(e){return this.getEvent(e).description},e.prototype.getEventHandlers=function(e){return this.getEvent(e).handlers},e.prototype.getEventParameters=function(e){return this.getEvent(e).parameters},e.prototype.getEventRegistrant=function(e){return this.getEvent(e).registrant},e.prototype.isRegistered=function(e){return this.eventIndex(e)>-1},e.prototype.register=function(e,t,r,n){if(!e||!t)throw new Error("Expected at least an event name and array of parameters in order to register an event.");if(this.isRegistered(e))throw new Error("Event "+e+" is already registered.");var s={description:r,name:e,parameters:t,registrant:n};this.registeredEvents.push(s)},e.prototype.deregister=function(e){if(!e)throw new Error("Expected an event name to deregister.");var t=this.eventIndex(e);if(!(t>-1))throw new Error("Event "+e+" is unregistered.");this.unsubscribe(e),this.registeredEvents.splice(t,1)},e.prototype.deregisterAll=function(){this.subscriptions={},this.registeredEvents=[]},e.prototype.subscribe=function(e,t){if(!e)throw new Error("Expected an event name to subscribe.");if(!this.isRegistered(e))throw new Error("Event "+e+" is unregistered.");if(!t)throw new Error("Expected an event handler.");return this.subscriptions.hasOwnProperty(e)||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),t},e.prototype.unsubscribe=function(e,t){if(!e)throw new Error("Expected an event name to unsubscribe.");if(!this.isRegistered(e))throw new Error("Event "+e+" is unregistered.");if(!this.subscriptions.hasOwnProperty(e))return!1;if(t){var r=this.subscriptions[e].indexOf(t);r>-1&&(this.subscriptions[e].splice(r,1),this.subscriptions[e].length<=0&&delete this.subscriptions[e])}else delete this.subscriptions[e];return!0},e.prototype.publish=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)throw new Error("Expected an event name to publish.");if(!this.subscriptions.hasOwnProperty(e))return!1;for(var n=this.subscriptions[e],s=0,i=void 0;i=n[s];s+=1)i.apply(void 0,t);return!0},e}(),publisher=new Publisher;